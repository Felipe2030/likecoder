<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Likecoder</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <section id="header">
        <div class="header-logo">
            <img src="assets/img/logo.png" alt="Logo">
        </div>
        <div class="header-nav">
            <ul>
                <li><a href="">Contato</a></li>
                <li class="active"><a href="">Projetos</a></li>
            </ul>
        </div>
    </section>
    <section id="content">
        <div class="content-post">
            <img src="assets/img/postagem.png" alt="">
        </div>
        <div class="content-form">
            <div class="content-info">
                <div class="content-info-title">
                    <span>Tudo o que você precisa</span>
                </div>
                <div class="content-info-subtitle">
                    <span>Transforme sua Visão em Realidade com Nossos Serviços Personalizados de Criação de Websites</span>
                </div>
                <div class="content-post-two">
                    <img src="assets/img/postagem.png" alt="">
                </div>
                <div class="content-info-descrition">
                    <span>Na <b>LikeCoder</b>, nossa missão é trazer a sua visão à vida. Oferecemos serviços de criação de websites que são totalmente personalizados para atender às suas necessidades exclusivas. Nossos designers talentosos e desenvolvedores experientes colaborarão de perto com você para criar um website que não apenas se destaque, mas também impulsione o seu sucesso online.</span>
                </div>
            </div>
            <div class="content-lead">
                <form id="form_contact" method="post">
                    <div class="content-lead-input">
                        <input type="text" name="contact" placeholder="Digite seu celular">
                        <input type="submit" value="CRIAR MEU SITE HOJE!">
                    </div>
                </form>
            </div>
        </div>
    </section>
    <section id="footer"></section>
</body>
</html>

<script type="module" async>
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    const response       = await fetch("./firebase.json");
    const person         = await response.text();
    const firebaseConfig = JSON.parse(person);

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    const formContact = document.querySelector("#form_contact");
    formContact.addEventListener("submit", async (event) => {
        event.preventDefault();

        const formData    = new FormData(formContact);
        const contact     = formData.get('contact');
        const currentDate = new Date();

        if(!contact.trim()){
            alert("Para prosseguir, por favor, forneça o seu contato!")
            return false;
        }

        try {
            await addDoc(collection(db, "contacts"), { contact: contact, date: currentDate });
            alert("Conseguimos salvar o seu contato. Por favor, aguarde um retorno em até 24h.");
            window.location.reload();
        } catch (e) {
            alert("Desculpe, não conseguimos salvar o seu contato. Por favor, tente novamente mais tarde.");
        }
    })
</script>